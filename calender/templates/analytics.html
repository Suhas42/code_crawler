<!DOCTYPE html>
	{% load static %}
	{% load tag %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>analytics</title>
</head>
<body>
<form action="{% url 'analytics' %}" method="post">
    {% csrf_token %}
    Enter handle:<br>
    <input type="text" name="handleinput">
    <input type="submit"  value="search">
</form>
<div>
    <div class="col-md-6">
        {% if status %}
      <script src=" {% static '/js/zingchart.min.js' %}"></script>
      
      <section id="graphs">
         <div class="col-md-6 col-sm-12 col-xs-12" >
            <div class="card h-100 border-info mb-3">
                <div class="card-header text-center">Rating</div>
                <div class="card-body" id="myChart2">
                    <script>
                        var Ratinggraph = {
                            "type": "line",

                            /*"title": {
                                "text": "Rating",
                                "font-size": "24px",
                                "adjust-layout": true
                            },*/
                            "plotarea": {
                                "margin": "dynamic 45 60 dynamic",
                            },
                            "legend": {
                                "layout": "float",
                                "background-color": "none",
                                "border-width": 0,
                                "shadow": 0,
                                "align": "center",
                                "adjust-layout": true,
                                "toggle-action": "remove",
                                "item": {
                                "padding": 7,
                                "marginRight": 17,
                                "cursor": "hand"
                                }
                            },
                            "scale-x": {
                                "labels": "{{rankingupdatetime}}" ,
                                "label": { /* Add a scale title with a label object. */
                                    "text": "Dates"
                                        }
                            },

                            "scale-y": {
                                "line-color": "#f6f7f8",
                                "shadow": 0,
                                "guide": {
                                "line-style": "dashed"
                                },
                              
                                "label": {
                                "text": "Ratings",
                                },
                                "minor-ticks": 0,
                                "thousands-separator": ","
                            },
                            "crosshair-x": {
                                "line-color": "#efefef",
                                "plot-label": {
                                "border-radius": "5px",
                                "border-width": "1px",
                                "border-color": "#f6f7f8",
                                "padding": "10px",
                                "font-weight": "bold"
                                },
                                "scale-label": {
                                "font-color": "#000",
                                "background-color": "#f6f7f8",
                                "border-radius": "5px"
                                }
                            },
                            "tooltip": {
                                "visible": false
                            },
                            "plot": {
                                "highlight": true,
                                "tooltip-text": "%t views: %v<br>%k",
                                "shadow": 0,
                                "line-width": "2px",
                                "marker": {
                                "type": "circle",
                                "size": 3
                                },
                                "highlight-state": {
                                "line-width": 3
                                },
                                "animation": {
                                "effect": 1,
                                "sequence": 2,
                                "speed": 100,
                                }
                            },
                            "series": [{
                                "values": {{ratings}} ,
                                "text": "Ratings",
                                "line-color": "#007790",
                                "legend-item": {
                                    "background-color": "#007790",
                                    "borderRadius": 5,
                                    "font-color": "white"
                                },
                                "legend-marker": {
                                    "visible": false
                                },
                                "marker": {
                                    "background-color": "#007790",
                                    "border-width": 1,
                                    "shadow": 0,
                                    "border-color": "#69dbf1"
                                },
                                "highlight-marker": {
                                    "size": 6,
                                    "background-color": "#007790",
                                }

                                },
                            ]
                            };

                            zingchart.render({
                            id: 'myChart2',
                            data: Ratinggraph,

                            });
                    </script>
                </div>
            </div>
        </div>
    </div>
   <div class="col-md-6 col-sm-12 col-xs-12" >
            <div class="card h-100 border-info mb-3">
                <div class="card-header text-center">Languages</div>
                <div class="card-body" id="myChart1">
                    <script>
                        var LangData = {
                            type : "pie3d",

                            plot: {
                                tooltip: {
                                text: "%t<br>%npv%<br>%v"
                                },

                            },
                            /*title : {
                            text : "Languages"
                            },*/
                            series: [
                                    {% for l in languagecount %}
                                          {% get_count languagecount l as lil %}
                                          { values: {{lil}}, text : "{{l}}"} {% if not forloop.last %},{% endif %}
                                    {% endfor %}
                            ]

                        }

                        zingchart.render({
                            id: 'myChart1',
                            data: LangData,
                        });
                    </script>
                </div>
            </div>
        </div>
    </div> 
    
      <div class="card-deck mb-5">
        <div class = "col-md-6 col-sm-12 col-xs-12">
            <div class="card h-100 border-info mb-3">
                <div class="card-header text-center">Submissions</div>
                <div class="card-body" id="myChart">

                    <script>

                        var SubmissionData = {
                            type : "pie3d",
                            "layout": "2x2",
                            "scale": {
                                   "size-factor": 0.5
                            },

                            plot: {
                                tooltip: {
                                text: "%t<br>%npv%<br>%v"
                                },


                                //to order pie slices by size and have reference angle start at zero.

                            },
                            /*title : {
                            text : "Submissions"
                            },*/
                            series: [
                                    {% for tag in tagcount %}
                                    {% get_count tagcount tag as lol %}
                                    { values: {{lol}}, text : "{{tag}}"} {% if not forloop.last %},{% endif %}
                                    {% endfor %}
                            ]

                        }

                        zingchart.render({
                            id: 'myChart',
                            data: SubmissionData,
                        });
                    </script>

                </div>

            </div>
        </div>  
        
             <div class="col-md-6 col-sm-12 col-xs-12" >
            <div class="card h-100 border-info mb-3">
                <div class="card-header text-center">No. Of Problems Solved vs Problem Rating</div>
                <div class="card-body" id="problem_rating_bar">
                    <script>
                    var problem_rating_data={
                        type: 'bar',
                        /*"title": {
                            "text": "No. Of Problems Solved vs Problem Rating",
                            "font-color": "#2da4cc",
                            "backgroundColor": "none",
                            "font-size": "22px",
                            "alpha": 1,
                            "adjust-layout": true,
                        },*/
                        plotarea: {
                            'adjust-layout': true
                        },
                        "plot": {
                            "bars-space-left": 0.15,
                            "bars-space-right": 0.15,
                            "animation": {
                                "effect": "ANIMATION_SLIDE_BOTTOM",
                                "sequence": 0,
                                "speed": 800,
                                "delay": 800
                            }
                        },
                        'scale-x': {
                            label: { /* Scale Title */
                                text: "Problems Rating",
                            },
                             labels: [{% for x in problemratingscount %}
                             "{{x}}" {% if not forloop.last %},{% endif %}
                             {% endfor %}]
                        },
                        'scale-y': {
                            label: {
                                text: "No. of Problems"
                            }
                        },
                        series: [
                        {
                            values:[{% for l in problemratingscount %}
                                {% get_ABC_count problemratingscount l as yoyo %}
                                {{yoyo}} {% if not forloop.last %},{% endif %}
                                {% endfor %}
                            ]
                        }]
                    }
                    zingchart.render({
                    id: 'problem_rating_bar',
                    data: problem_rating_data,});
                    </script>
                </div>
            </div>
        </div>
    </div>
 
        {% endif %}
    </div>
</div>
</body>
</html>